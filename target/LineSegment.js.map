{"version":3,"sources":["../src/LineSegment.js"],"names":["LineSegment","v1","v2","setPoints","segment","start","eql","end","A","elements","B","C1","C2","C3","Math","sqrt","Vector","Plane","midpoint","toVector","vector","V","S","E","obj","line","isParallelTo","P","pointClosestTo","distanceFrom","contains","slice","length","push","vect","isAntiparallelTo","modulus","intersectionWith","intersects","normal","positionOf","dup","startPoint","endPoint","to3D","Line","subtract"],"mappings":"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","file":"LineSegment.js","sourcesContent":["\"use strict\";\n\nimport { Vector } from \"./Vector\";\nimport { Plane } from \"./Plane\";\nimport { Line } from \"./Line\";\n\nexport class LineSegment\n{\n    constructor (v1, v2)\n    {\n        this.setPoints(v1, v2);\n    }\n\n    eql (segment)\n    {\n        return (this.start.eql(segment.start) && this.end.eql(segment.end)) || (this.start.eql(segment.end) && this.end.eql(segment.start));\n    }\n\n    dup ()\n    {\n        return new LineSegment(this.start, this.end);\n    }\n\n    length ()\n    {\n        var A = this.start.elements, B = this.end.elements;\n        var C1 = B[0] - A[0], C2 = B[1] - A[1], C3 = B[2] - A[2];\n        return Math.sqrt(C1*C1 + C2*C2 + C3*C3);\n    }\n\n    toVector ()\n    {\n        var A = this.start.elements, B = this.end.elements;\n        return new Vector([B[0] - A[0], B[1] - A[1], B[2] - A[2]]);\n    }\n\n    midpoint ()\n    {\n        var A = this.start.elements, B = this.end.elements;\n        return new Vector([(B[0] + A[0])/2, (B[1] + A[1])/2, (B[2] + A[2])/2]);\n    }\n\n    bisectingPlane ()\n    {\n        return new Plane(this.midpoint(), this.toVector());\n    }\n\n    translate (vector)\n    {\n        var V = vector.elements || vector;\n        var S = this.start.elements, E = this.end.elements;\n        return new LineSegment(\n            [S[0] + V[0], S[1] + V[1], S[2] + (V[2] || 0)],\n            [E[0] + V[0], E[1] + V[1], E[2] + (V[2] || 0)]\n        );\n    }\n\n    isParallelTo (obj)\n    {\n        return this.line.isParallelTo(obj);\n    }\n\n    distanceFrom (obj)\n    {\n        var P = this.pointClosestTo(obj);\n        return (P === null) ? null : P.distanceFrom(obj);\n    }\n\n    contains (obj)\n    {\n        if (obj.start && obj.end)\n        {\n            return this.contains(obj.start) && this.contains(obj.end);\n        }\n        var P = (obj.elements || obj).slice();\n        if (P.length === 2)\n        {\n            P.push(0);\n        }\n        if (this.start.eql(P))\n        {\n            return true;\n        }\n        var S = this.start.elements;\n        var V = new Vector([S[0] - P[0], S[1] - P[1], S[2] - (P[2] || 0)]);\n        var vect = this.toVector();\n        return V.isAntiparallelTo(vect) && V.modulus() <= vect.modulus();\n    }\n\n    intersects (obj)\n    {\n        return (this.intersectionWith(obj) !== null);\n    }\n\n    intersectionWith (obj)\n    {\n        if (!this.line.intersects(obj))\n        {\n            return null;\n        }\n        var P = this.line.intersectionWith(obj);\n        return (this.contains(P) ? P : null);\n    }\n\n    pointClosestTo (obj)\n    {\n        if (obj.normal)\n        {\n            // obj is a plane\n            var V = this.line.intersectionWith(obj);\n            if (V === null) { return null; }\n            return this.pointClosestTo(V);\n        }\n        else\n        {\n            // obj is a line (segment) or point\n            var P = this.line.pointClosestTo(obj);\n            if (P === null)\n            {\n                return null;\n            }\n            if (this.contains(P))\n            {\n                return P;\n            }\n            return (this.line.positionOf(P) < 0 ? this.start : this.end).dup();\n        }\n    }\n\n    setPoints (startPoint, endPoint)\n    {\n        startPoint = new Vector(startPoint).to3D();\n        endPoint = new Vector(endPoint).to3D();\n        if (startPoint === null || endPoint === null)\n        {\n            return null;\n        }\n        this.line = new Line(startPoint, endPoint.subtract(startPoint));\n        this.start = startPoint;\n        this.end = endPoint;\n        return this;\n    }\n}"]}