{"version":3,"sources":["../src/Utils.js"],"names":["mht","makeLookAt","makeOrtho","makePerspective","makeFrustum","m","s","length","i","toFixed","toString","ex","ey","ez","cx","cy","cz","ux","uy","uz","eye","Vector","center","up","mag","z","subtract","toUnitVector","x","cross","y","Matrix","e","t","left","right","bottom","top","znear","zfar","tx","ty","tz","fovy","aspect","ymax","Math","tan","PI","ymin","xmin","xmax","X","Y","A","B","C","D"],"mappings":"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","file":"Utils.js","sourcesContent":["\"use strict\";\n\nimport { Vector } from \"./Vector\";\nimport { Matrix } from \"./Matrix\";\n\n//From glUtils.js\nexport function mht(m)\n{\n    var s = \"\";\n    if (m.length == 16)\n    {\n        for (var i = 0; i < 4; i++)\n        {\n            s += \"<span style='font-family: monospace'>[\" + m[i*4+0].toFixed(4) + \",\" + m[i*4+1].toFixed(4) + \",\" + m[i*4+2].toFixed(4) + \",\" + m[i*4+3].toFixed(4) + \"]</span><br>\";\n        }\n    }\n    else if (m.length == 9)\n    {\n        for (var i = 0; i < 3; i++)\n        {\n            s += \"<span style='font-family: monospace'>[\" + m[i*3+0].toFixed(4) + \",\" + m[i*3+1].toFixed(4) + \",\" + m[i*3+2].toFixed(4) + \"]</font><br>\";\n        }\n    }\n    else\n    {\n        return m.toString();\n    }\n    return s;\n}\n\n//From glUtils.js\n//\n// gluLookAt\n//\nexport function makeLookAt(ex, ey, ez,\n                           cx, cy, cz,\n                           ux, uy, uz)\n{\n    var eye = new Vector([ex, ey, ez]);\n    var center = new Vector([cx, cy, cz]);\n    var up = new Vector([ux, uy, uz]);\n\n    var mag;\n\n    var z = eye.subtract(center).toUnitVector();\n    var x = up.cross(z).toUnitVector();\n    var y = z.cross(x).toUnitVector();\n\n    var m = new Matrix([\n                [x.e(1), x.e(2), x.e(3), 0],\n                [y.e(1), y.e(2), y.e(3), 0],\n                [z.e(1), z.e(2), z.e(3), 0],\n                [0, 0, 0, 1]\n    ]);\n\n    var t = new Matrix([\n                [1, 0, 0, -ex],\n                [0, 1, 0, -ey],\n                [0, 0, 1, -ez],\n                [0, 0, 0, 1]\n    ]);\n    return m.x(t);\n}\n\n//From glUtils.js\n//\n// glOrtho\n//\nexport function makeOrtho(left, right,\n                          bottom, top,\n                          znear, zfar)\n{\n    var tx = -(right+left)/(right-left);\n    var ty = -(top+bottom)/(top-bottom);\n    var tz = -(zfar+znear)/(zfar-znear);\n\n    return new Matrix([\n                [2/(right-left), 0, 0, tx],\n                [0, 2/(top-bottom), 0, ty],\n                [0, 0, -2/(zfar-znear), tz],\n                [0, 0, 0, 1]\n    ]);\n}\n\n//From glUtils.js\n//\n// gluPerspective\n//\nexport function makePerspective(fovy, aspect, znear, zfar)\n{\n    var ymax = znear * Math.tan(fovy * Math.PI / 360.0);\n    var ymin = -ymax;\n    var xmin = ymin * aspect;\n    var xmax = ymax * aspect;\n\n    return makeFrustum(xmin, xmax, ymin, ymax, znear, zfar);\n}\n\n//From glUtils.js\n//\n// glFrustum\n//\nexport function makeFrustum(left, right,\n                     bottom, top,\n                     znear, zfar)\n{\n    var X = 2*znear/(right-left);\n    var Y = 2*znear/(top-bottom);\n    var A = (right+left)/(right-left);\n    var B = (top+bottom)/(top-bottom);\n    var C = -(zfar+znear)/(zfar-znear);\n    var D = -2*zfar*znear/(zfar-znear);\n\n    return new Matrix([\n                [X, 0, A, 0],\n                [0, Y, B, 0],\n                [0, 0, C, D],\n                [0, 0, -1, 0]\n    ]);\n}\n"]}